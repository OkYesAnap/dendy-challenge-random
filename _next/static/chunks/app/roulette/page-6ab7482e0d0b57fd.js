(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{2457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var l=s(5155),a=s(8535),r=s(2115),n=s(4540),o=s(5695),c=s(5431);let i=e=>{let{currentGame:t,currentGamePos:s}=e;return(0,l.jsx)(c.P.div,{style:{top:"".concat(s+32,"px")},className:"".concat(t?"opacity-100":"opacity-0"," fixed max-h-[85%] max-w-[85%] text-4xl left-1/2 transform -translate-x-1/2 top-1/2 -translate-y-[56%] border-3 bg-black rounded overflow-hidden whitespace-nowrap p-6"),layout:!0,transition:{default:{ease:"ease"},layout:{duration:.5}},children:t})},d=e=>{let{halfListHeight:t,visible:s}=e;return(0,l.jsxs)("div",{className:"".concat(s?"opacity-100":"opacity-0"," duration-1500 ease-linear"),children:[(0,l.jsx)("div",{style:{top:"".concat(t,"px")},className:"absolute -right-5 bg-white w-10 h-10 rotate-[45deg] z-10"}),(0,l.jsx)("div",{style:{top:"".concat(t-18,"px")},className:"absolute bg-white w-full h-2 z-10"}),(0,l.jsx)("div",{style:{top:"".concat(t+50,"px")},className:"absolute bg-white w-full h-2 z-10"}),(0,l.jsx)("div",{style:{top:"".concat(t,"px")},className:"absolute -left-5 bg-white w-10 h-10 rotate-[45deg] z-10"})]})},u="/dendy-challenge-random/audio/",m={min:30,max:2e3},x=e=>{let{setCurrentGamePos:t,start:s,clearList:o,currentGame:i,setNewRollAvailable:x,setAudioSrcName:h,setCurrentGame:f}=e,p=(0,n.wA)(),[g,b]=(0,r.useState)([]),[v,j]=(0,r.useState)(0),[y,w]=(0,r.useState)(0),[N,S]=(0,r.useState)(0),C=(0,r.useRef)(null),R=(0,r.useRef)(null),L=(0,r.useRef)(null),D=(0,r.useRef)(null),k=(0,n.d4)(a.O9),E=(0,n.d4)(a.eJ),A=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{if(A.current&&g.length){var e;let s=A.current.offsetHeight;j(s);let l=A.current.querySelectorAll("li"),a=(null===(e=l[0])||void 0===e?void 0:e.offsetHeight)||1,r=Math.floor(s/a/2);j(r),S(r*a+10),t(l[r].getBoundingClientRect().top)}},[A,j,S,E,g,t]),(0,r.useEffect)(()=>(b(k.slice(0,30)),s&&(L.current=setInterval(()=>{p((0,a.QB)())},m.min)),!s&&y&&(L.current&&clearInterval(L.current),R.current&&clearInterval(R.current),R.current=setTimeout(()=>{p((0,a.QB)()),w(e=>e+=e/10)},y),y>=m.max-1250*Math.random()&&(w(0),setTimeout(()=>{f(k[v]),p((0,a.JR)(v)),R.current=null},3e3))),()=>{L.current&&clearInterval(L.current),R.current&&clearInterval(R.current)}),[s,y,p,v,k,f,o]),(0,r.useEffect)(()=>{s&&(f(""),w(1))},[s,f]),(0,r.useEffect)(()=>(i&&(h("RollComplete.mp3"),x(!0),C.current=setTimeout(()=>{x(!1),h("")},3e3)),()=>{C.current&&clearTimeout(C.current)}),[i,h,f,x]),(0,l.jsxs)(c.P.div,{layout:!0,transition:{layout:{duration:.5}},ref:A,style:{height:"".concat(o?"2rem":"")},className:"".concat(i?"text-gray-600":""," fixed max-h-[85%] md:w-3/4 lg:w-1/2 xl:w-1/3 text-xl left-1/2 transform -translate-x-1/2 top-1/2 -translate-y-[58%] border-3 bg-black rounded overflow-hidden"),children:[(0,l.jsx)(d,{halfListHeight:N,visible:!!R.current}),(0,l.jsx)("audio",{ref:D,src:"".concat(u,"StopRoll.mp3")}),(0,l.jsx)("ul",{className:"w-full flex flex-col",children:g.map(e=>(0,l.jsx)(c.P.li,{className:"border-t w-full border-b h-".concat(16," border-gray-300 pl-10 pr-10 pt-4 pb-4 text-center whitespace-nowrap overflow-hidden overflow-ellipsis"),layout:!0,transition:{layout:{duration:s||!s&&y?y/1e3:1.5}},children:e},e))})]})},h=["01-Title.mp3","02-Intermission.mp3","03-Ragnaroks-Canyon-(Level-1).mp3","04-Wookie-Hole(Leve-2).mp3","06-Turbo-Tunnel-Speeder-Bike-(Level-3-2).mp3","07-Arctic-Caverns-(Level-4).mp3","12-Intruder-Excluder-(Level-8).mp3"],f=e=>{let{setOpenRoll:t}=e,[s,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[b,v]=(0,r.useState)(0),[j,y]=(0,r.useState)(""),w=(0,r.useRef)(null),N=(0,r.useRef)(null),S=(0,n.wA)();return(0,r.useEffect)(()=>{w.current&&j&&(w.current.pause(),w.current.currentTime=0,w.current.play())},[j]),(0,l.jsxs)("div",{className:"fixed inset-0 bg-black/80",children:[!!j&&(0,l.jsx)("audio",{ref:w,src:"".concat(u).concat(j)}),(0,l.jsx)("audio",{ref:N,src:"".concat(u,"StopRoll.mp3")}),(0,l.jsx)(x,{setCurrentGamePos:v,start:s,clearList:c,currentGame:p,setNewRollAvailable:f,setAudioSrcName:y,setCurrentGame:g}),(0,l.jsx)(i,{currentGame:p,currentGamePos:b}),(0,l.jsx)("div",{className:"flex flex-row fixed text-xl left-1/2 transform -translate-x-1/2 bottom-0 bg-black p-3 border rounded overflow-hidden",children:(0,l.jsxs)("div",{className:"border rounded-full p-1 flex flex-row",children:[(0,l.jsx)("button",{className:R,onClick:()=>S((0,a.af)()),children:"\uD83D\uDD00"}),s?(0,l.jsx)("button",{className:"".concat(R," ").concat(s?"hover:bg-gray-700":"text-gray-500 grayscale"),disabled:!s,onClick:()=>{o(!1),N.current&&(N.current.currentTime=0,N.current.play())},children:"\uD83D\uDED1"}):(0,l.jsx)("button",{className:"".concat(R," ").concat(s||m?"text-gray-500 grayscale":"hover:bg-gray-700"),disabled:s||m,onClick:()=>{let e=Math.floor(Math.random()*h.length);y(h[e]),o(!0)},children:"\uD83D\uDE80"}),(0,l.jsx)("button",{className:R,onClick:()=>{d(!0),g(""),setTimeout(()=>{t()},500)},children:"❌"})]})})]})};var p=s(7650);let g=e=>{let{children:t,isOpen:s,onClose:a,startPos:n,startElement:o}=e,i=(0,r.useRef)(null),d=()=>{i.current&&clearTimeout(i.current)},[u,m]=(0,r.useState)(0);return((0,r.useLayoutEffect)(()=>{m(0),d(),i.current=setTimeout(()=>{m(1)},0)},[n]),(0,r.useEffect)(()=>{1===u&&(d(),i.current=setTimeout(()=>{m(2)},300))},[u]),s)?p.createPortal((0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center",onMouseDown:()=>{u&&d(),m(0),i.current=setTimeout(()=>{a()},400)},children:(0,l.jsx)(c.P.div,{layout:!0,transition:{layout:{duration:u?.7:.3}},style:{position:u?"unset":"absolute",top:null==n?void 0:n.top,left:null==n?void 0:n.left},className:"text-2xl bg-black max-w-[50%]  max-h-[90%] overflow-auto",onMouseDown:e=>e.stopPropagation(),children:2===u?t:o})}),document.body):null};var b=s(6766);let v=e=>/^(https?:\/\/).+\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(e),j=e=>{let{headers:t,infoData:s,isOpen:a,onClose:r,startPos:n,startElement:o}=e;return(0,l.jsx)(g,{isOpen:a,onClose:r,startPos:n,startElement:o,children:s.map((e,a)=>a>0?(0,l.jsxs)("div",{className:"flex items-center justify-center border",children:[t[a]&&(0,l.jsxs)("div",{className:"text-2xl font-bold pl-2 pr-2",children:[t[a],":"]}),(0,l.jsxs)("div",{children:[" ",v(e)?(0,l.jsx)(b.default,{src:e,alt:s[1],width:100,height:100,className:"w-full"}):(0,l.jsx)("div",{className:"text-xl p-2",children:e})]})]},"".concat(s[0],"-").concat(a)):null)})},y=()=>(0,l.jsxs)("div",{className:"fixed max-h-[85%] text-2xl left-1/2 transform p-10 -translate-x-1/2 top-1/2 -translate-y-[50%] border-3 bg-black rounded",children:[(0,l.jsx)("div",{children:"Please provide the Google Sheets URL and specify the RANGE, ensuring that the fields are not empty."}),(0,l.jsx)("div",{className:"mt-4 font-bold",children:"IMPORTANT: Please use the direct URL from your browser, NOT the share link!"})]}),w=e=>{let{isOpen:t,onClose:s,paramsRef:a,handleLoad:n,startPos:o,startElement:c}=e,i=e=>{a.current={...a.current,...e}};return(0,r.useEffect)(()=>{},[a.current.header]),(0,l.jsx)(g,{isOpen:t,onClose:s,startPos:o,startElement:c,children:(0,l.jsxs)("div",{className:"flex flex-col text-gray-100",children:[(0,l.jsxs)("div",{className:"flex flex-row border p-2 items-center",children:[(0,l.jsx)("span",{className:"w-1/6",children:"URL:"}),(0,l.jsx)("input",{onChange:e=>i({url:e.target.value}),className:"flex-1 bg-gray-700 p-1",type:"text",defaultValue:a.current.url})]}),(0,l.jsxs)("div",{className:"flex flex-row border p-2 items-center",children:[(0,l.jsx)("span",{className:"w-1/6",children:"Range:"}),(0,l.jsx)("input",{onChange:e=>i({range:e.target.value}),className:"flex-1 bg-gray-700 p-1",type:"text",defaultValue:a.current.range})]}),(0,l.jsxs)("div",{className:"flex flex-row border p-2 items-center",children:[(0,l.jsx)("input",{className:"ml-1 rounded border transform scale-150",type:"checkbox",onChange:e=>{i({header:e.target.checked})},defaultChecked:a.current.header}),(0,l.jsx)("span",{className:"flex-1 mr-2 pl-2",children:"HEADER - first line will be skipped as Header"})]}),(0,l.jsxs)("div",{className:"flex flex-row border p-2 items-center",children:[(0,l.jsx)("button",{className:"flex-1 mr-2 p-1 border",onClick:()=>n(),children:"Load"}),(0,l.jsx)("button",{className:"flex-1 mr-2 p-1 border",onClick:s,children:"Cancel"})]})]})})};var N=s(7489),S=s(7883);let C={url:"",range:"A1:A1000",header:!1},R="flex-1 p-1 border text-3xl rounded-full w-15 h-15",L=()=>{let[e,t]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(3),[h,p]=(0,r.useState)(!0),[g,b]=(0,r.useState)(!1),[v,L]=(0,r.useState)([]),D=(0,r.useRef)(C),[k,E]=(0,r.useState)(),A=(0,n.wA)(),T=(0,n.d4)(a.wT),P=(0,n.d4)(a.b3),I=(0,n.d4)(a.eJ),G=(0,n.d4)(a.Lq),M=(0,n.d4)(a.Qj),O=(0,n.d4)(a.N5),_=(0,o.useRouter)(),B=(0,o.useSearchParams)(),J=(0,r.useCallback)(()=>{let{range:e,url:s,header:l}=D.current;_.push("?range=".concat(e,"&header=").concat(l,"&url=").concat(s)),A((0,a.d6)(D.current)),t(!1)},[A,_]);(0,r.useEffect)(()=>{p(!M.length)},[M.length]),(0,r.useEffect)(()=>{let e="true"===B.get("header"),t=B.get("range")||C.range,s=B.get("url")||C.url,{range:l,url:a}=D.current;(t!==l||s!==a)&&(D.current={header:e,range:t,url:s},J())},[B,J]);let F=e=>{E(e.currentTarget.getBoundingClientRect())},H=(e,t)=>{F(e),b(!0),L(t)},Q=e=>{F(e),t(!0)};return(0,l.jsxs)(l.Fragment,{children:[!!P.length&&(0,l.jsx)("div",{className:"bg-black w-full text-center text-4xl p-2 font-bold",children:P[1]}),(0,l.jsxs)("div",{className:"grid grid-flow-col text-2xl top-1",style:{gridTemplateColumns:"repeat(".concat(m,", minmax(0, 1fr))"),gridTemplateRows:"repeat(".concat(Math.ceil(T.length/m),", minmax(0, 1fr))")},children:[T.map(e=>(0,l.jsxs)(c.P.div,{layout:!0,transition:{layout:{duration:1.5}},className:"flex justify-between p-1 border ".concat(I.find(t=>t===e[0])?"text-gray-500":""),children:[(0,l.jsx)("span",{className:"flex-grow overflow-hidden whitespace-nowrap overflow-ellipsis",children:e[0]}),e.length>2&&(e[0]!==v[0]||!g)?(0,l.jsx)("div",{className:"cursor-pointer",onClick:t=>H(t,e),children:(0,l.jsx)(N.g,{icon:S.CHJ})}):null]},e[0])),h&&!G&&(0,l.jsx)(y,{}),(0,l.jsxs)(c.P.div,{layout:!0,transition:{layout:{duration:.1}},className:"flex flex-row fixed text-xl left-1/2 transform -translate-x-1/2 bottom-0 bg-black p-3 border rounded overflow-hidden",children:[(0,l.jsxs)("div",{className:"border rounded-full p-1 flex flex-row",children:[!!O.length&&(0,l.jsx)("button",{className:R,onClick:()=>u(!0),children:"\uD83C\uDFB0"}),(0,l.jsx)("button",{className:R,onClick:e=>Q(e),children:"\uD83D\uDCE5"}),(0,l.jsx)("button",{className:R,onClick:()=>i(e=>!e),children:"..."})]}),s&&(0,l.jsxs)("div",{className:"border rounded-full p-1 flex flex-row",children:[(0,l.jsx)("button",{className:R,onClick:()=>x(e=>e>1?e-1:e),children:"-"}),(0,l.jsx)("button",{className:R,children:m}),(0,l.jsx)("button",{className:R,onClick:()=>x(e=>e<12?e+1:e),children:"+"}),!!O.length&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{className:R,onClick:()=>A((0,a.cZ)()),children:"\uD83D\uDD00"}),(0,l.jsx)("button",{className:R,onClick:()=>A((0,a.hR)()),children:"\uD83D\uDCC8"}),(0,l.jsx)("button",{className:R,onClick:()=>J(),children:"\uD83D\uDD04"})]})]})]}),d&&(0,l.jsx)(f,{setOpenRoll:()=>u(!1)}),(0,l.jsx)(w,{startPos:k,isOpen:e,onClose:()=>t(!1),paramsRef:D,handleLoad:J,startElement:(0,l.jsx)("button",{className:R,children:"\uD83D\uDCE5"})}),(0,l.jsx)(j,{startPos:k,startElement:(0,l.jsx)(N.g,{icon:S.CHJ}),headers:P,infoData:v,isOpen:g,onClose:()=>b(!1)}),G&&(0,l.jsx)("div",{className:"fixed max-h-[85%] text-4xl left-1/2 transform p-10 -translate-x-1/2 top-1/2 -translate-y-[50%] border-3 bg-black rounded",children:"Loading List"})]})]})};var D=s(6507);let k=()=>(0,l.jsx)(n.Kq,{store:D.A,children:(0,l.jsx)(r.Suspense,{children:(0,l.jsx)("div",{className:"bg-black w-full h-full min-h-screen text-gray-100 font-[family-name:var(--font-geist-sans)] pb-35",children:(0,l.jsx)(L,{})})})})},6507:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(1990),a=s(8535);let r=(0,l.U1)({reducer:{games:a.Ay}})},8535:(e,t,s)=>{"use strict";s.d(t,{Uf:()=>b,JR:()=>g,D5:()=>v,wT:()=>k,N5:()=>D,pv:()=>M,eJ:()=>T,w_:()=>B,Ay:()=>H,_g:()=>O,oP:()=>G,V_:()=>J,d6:()=>d,b3:()=>E,Lq:()=>F,pQ:()=>L,fQ:()=>w,sC:()=>_,QB:()=>N,iS:()=>j,b8:()=>y,cZ:()=>C,af:()=>S,O9:()=>I,hR:()=>R,Qj:()=>A,oG:()=>P});var l=s(1990);let a=e=>{let t=Math.floor(Math.random()*e.slotsList.length),s=e.slotsList[t];e.currentSlot=s,e.slotsList.splice(t,1),e.currentRolls.push(s),e.gamesInEvent<=e.currentRolls.length&&(e.eventsList.push(e.currentRolls),e.currentRolls.find(e=>e.includes("Black slot"))&&(e.blackFieldsCounter+=1),e.currentRolls=[],e.slotsList=e.startSlots,e.eventsCounter+=1),e.showVisualEvents<=e.eventsList.length&&(e.eventsList=[]),e.statistics[s]+=1,e.rollCounter+=1},r=e=>{for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e},n=e=>Array.isArray(e)&&e.length>0?e.sort((e,t)=>parseInt(e[0],10)-parseInt(t[0],10)):e,o=e=>e.reduce((e,t)=>(t.some(e=>"✖"===e||"✔"===e||"✖️"===e||"✔️"===e)&&e.push(t[0]),e),[]);var c=s(3464);let i=async e=>{let{url:t,range:s,header:l}=e,{id:a,gid:r}=function(e){let t=e.match(/\/d\/(.*?)\/.*\?gid=(\d+)/);return t?{id:t[1],gid:t[2]}:{}}(t),n=[];try{let e=(await c.A.get("https://docs.google.com/spreadsheets/d/".concat(a,"/gviz/tq?tqx=out:json&gid=").concat(r,"&range=").concat(s))).data,{rows:t,cols:o}=JSON.parse(e.substr(47).slice(0,-2)).table,i=o[0].label,d=l&&!i,u=+!d,m=t.reduce((e,t)=>{var s,l,a;if(null===(s=t.c[0])||void 0===s?void 0:s.v){e.push([]);let s=e[e.length-1];s.push("".concat(u++,". ").concat(null===(l=t.c[0])||void 0===l?void 0:l.v),null===(a=t.c[0])||void 0===a?void 0:a.v),t.c.length>1&&t.c.forEach((e,l)=>{var a;(null===(a=t.c[l])||void 0===a?void 0:a.v)&&l&&s.push(e.v)})}return e},[]);return d&&(n=m.shift()||[]),l&&i&&(n=["",...o.map(e=>e.label)]),{headers:n,data:m}}catch(e){return console.error("Error fetching data:",e),{headers:[],data:[]}}},d=(0,l.zD)("games/getGamesList",async e=>await i(e)),u=(0,l.VP)("games/addSlots"),m=(0,l.VP)("games/addDisabledSlots"),x={allGamesList:[],allData:[],headers:[],startSlots:[],currentRolls:[],slotsList:[],statistics:{},gamesInEvent:7,showVisualEvents:6,eventsList:[],blackFieldsCounter:0,eventsCounter:0,rollCounter:0,currentSlot:"",loading:!1},h=(0,l.Z0)({name:"games",initialState:x,reducers:{setAllGamesList(e,t){e.allGamesList=t.payload},setStartSlots(e,t){e.startSlots=t.payload},addSlots(e,t){let{slots:s}=t.payload;e.startSlots=[...e.allGamesList,...s],e.slotsList=e.startSlots,h.caseReducers.resetStatistics(e)},addRoll(e,t){let s=t.payload,l=e.slotsList[s];e.currentSlot=l,e.slotsList.splice(s,1),e.currentRolls.push(l)},addDisabledSlots(e,t){e.currentRolls=t.payload,e.slotsList=e.slotsList.filter(e=>!t.payload.includes(e))},addRandomRoll(e){a(e)},rollOneStep(e){let t=e.slotsList.shift();e.slotsList.push(t||"")},setCurrentSlot(e,t){e.currentSlot=t.payload},setGamesInEvent(e,t){let s=t.payload,l=e.startSlots.length;s>l&&(s=l),s<1&&(s=1),e.gamesInEvent=s},shuffleRouletteList(e){let{slotsList:t}=e;e.slotsList=r(t)},syncAllDataAndSlotsList(e){let{allData:t,slotsList:s}=e;e.slotsList=t.reduce((e,t)=>{let l=s.find(e=>e===t[0]);return l&&e.push(l),e},[])},shuffleAllGamesList(e){let{allData:t}=e,s=r(t);e.allData=r(s),h.caseReducers.syncAllDataAndSlotsList(e)},sortAllGamesList(e){let{allData:t}=e;e.allData=n(t),h.caseReducers.syncAllDataAndSlotsList(e)},resetStatistics(e){e.statistics={},e.currentRolls=[],e.eventsList=[],e.startSlots.forEach(t=>e.statistics[t]=0),e.blackFieldsCounter=0,e.eventsCounter=0,e.rollCounter=0},resetStartSlots:()=>x},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,h.caseReducers.addSlots(e,u({slots:[]}))}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.allGamesList=t.payload.data.map(e=>e[0]),e.allData=t.payload.data,e.headers=t.payload.headers,h.caseReducers.addSlots(e,u({slots:[]}));let s=o(t.payload.data);h.caseReducers.addDisabledSlots(e,m(s))})}}),{setAllGamesList:f,setStartSlots:p,addRoll:g,addRandomRoll:b,addSlots:v,setCurrentSlot:j,setGamesInEvent:y,resetStatistics:w,rollOneStep:N,shuffleRouletteList:S,shuffleAllGamesList:C,sortAllGamesList:R,resetStartSlots:L}=h.actions,D=e=>e.games.allGamesList,k=e=>e.games.allData,E=e=>e.games.headers,A=e=>e.games.startSlots,T=e=>e.games.currentRolls,P=e=>e.games.statistics,I=e=>e.games.slotsList,G=e=>e.games.eventsList,M=e=>e.games.blackFieldsCounter,O=e=>e.games.eventsCounter,_=e=>e.games.rollCounter,B=e=>e.games.currentSlot,J=e=>e.games.gamesInEvent,F=e=>e.games.loading,H=h.reducer},8819:(e,t,s)=>{Promise.resolve().then(s.bind(s,2457))}},e=>{var t=t=>e(e.s=t);e.O(0,[284,534,441,684,358],()=>t(8819)),_N_E=e.O()}]);